{"ast":null,"code":"import \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport HeaderLogo from '@/components/HeaderLogo.vue';\nexport default {\n  data: function data() {\n    return {\n      posts: []\n    };\n  },\n  created: function created() {\n    this.getPosts();\n  },\n  methods: {\n    getPosts: function getPosts() {\n      var _this = this;\n      var userId = JSON.parse(localStorage.getItem(\"user\")).userId;\n      var requestOptions = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token\n        }\n      };\n      fetch(\"http://localhost:3000/api/posts/\" + userId, requestOptions).then(function (res) {\n        return res.json().then(function (data) {\n          _this.posts = data;\n          console.log(data);\n        });\n      })[\"catch\"](function (error) {\n        console.error(\"There was an error!\", error);\n      });\n    },\n    deleteAccount: function deleteAccount() {\n      var _this2 = this;\n      var requestOptions = {\n        method: \"DELETE\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token\n        }\n      };\n      fetch(\"http://localhost:3000/api/users/\" + JSON.parse(localStorage.getItem(\"user\")).userId, requestOptions).then(function (res) {\n        return res.json().then(function (data) {\n          console.log(data);\n          if (res.ok) {\n            _this2.$router.push(\"/\");\n            alert(\"Your account has been deleted\");\n          }\n        });\n      })[\"catch\"](function (error) {\n        console.error(\"There was an error!\", error);\n      });\n    }\n  },\n  components: {\n    HeaderLogo: HeaderLogo\n  }\n};","map":{"version":3,"mappings":";;AAwBA,OAAOA,UAAS,MAAO,6BAA6B;AAEpD,eAAe;EACXC,IAAI,kBAAG;IACH,OAAO;MACHC,KAAK,EAAE;IACX;EACJ,CAAC;EACDC,OAAO,qBAAG;IACN,IAAI,CAACC,QAAQ,EAAC;EAClB,CAAC;EAEDC,OAAO,EAAE;IACLD,QAAQ,sBAAG;MAAA;MACP,IAAME,MAAK,GAAIC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACJ,MAAK;MAC7D,IAAMK,cAAa,GAAI;QACnBC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAE,SAAQ,GAAIP,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACK;QACxE;MACJ;MAEAC,KAAK,CAAC,kCAAiC,GAAIV,MAAM,EAAEK,cAAc,EAC5DM,IAAI,CAAC,UAACC,GAAG,EAAK;QACX,OAAOA,GAAG,CAACC,IAAI,EAAC,CACXF,IAAI,CAAC,UAAChB,IAAI,EAAK;UACZ,KAAI,CAACC,KAAI,GAAID,IAAI;UACjBmB,OAAO,CAACC,GAAG,CAACpB,IAAI,CAAC;QACrB,CAAC,CAAC;MACV,CAAC,UACK,CAAC,UAACqB,KAAK,EAAK;QACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC/C,CAAC,CAAC;IACV,CAAC;IACDC,aAAa,2BAAG;MAAA;MACZ,IAAMZ,cAAa,GAAI;QACnBC,MAAM,EAAE,QAAQ;QAChBC,OAAO,EAAE;UACL,cAAc,EAAE,kBAAkB;UAClCC,aAAa,EAAE,SAAQ,GAAIP,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACK;QACxE;MACJ,CAAC;MACDC,KAAK,CAAC,kCAAiC,GAAIT,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAACJ,MAAM,EAAEK,cAAc,EACrGM,IAAI,CAAC,UAACC,GAAG,EAAK;QACX,OAAOA,GAAG,CAACC,IAAI,EAAC,CACXF,IAAI,CAAC,UAAChB,IAAI,EAAK;UACZmB,OAAO,CAACC,GAAG,CAACpB,IAAI,CAAC;UACjB,IAAIiB,GAAG,CAACM,EAAE,EAAE;YACR,MAAI,CAACC,OAAO,CAACC,IAAI,CAAC,GAAG,CAAC;YACtBC,KAAK,CAAC,+BAA+B,CAAC;UAC1C;QACJ,CAAC,CAAC;MACV,CAAC,UACK,CAAC,UAACL,KAAK,EAAK;QACdF,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC/C,CAAC,CAAC;IACV;EACJ,CAAC;EAEDM,UAAU,EAAE;IACR5B,UAAU,EAAVA;EAEJ;AACJ","names":["HeaderLogo","data","posts","created","getPosts","methods","userId","JSON","parse","localStorage","getItem","requestOptions","method","headers","Authorization","token","fetch","then","res","json","console","log","error","deleteAccount","ok","$router","push","alert","components"],"sourceRoot":"","sources":["/Users/stevengalarza/Webcodes/Project-7/frontend/src/views/Profile.vue"],"sourcesContent":["<template>\n    <HeaderLogo />\n    <RouterLink to=\"/home\">\n        <button class=\"btn btn-primary btn-med\" id=\"home-btn\" role=\"button\"><strong>Home</strong></button>\n    </RouterLink>\n    <button class=\"btn btn-primary btn-lg\" id=\"delete_account_btn\" v-on:click.prevent=\"deleteAccount()\"\n        role=\"button\"><strong>Delete Account</strong></button>\n    <div class=\"posts\">\n        <div v-for=\"post in posts\" :key=\"post.userid\" class=\"card\">\n            <div class=\"card-body\">\n                <h4 class=\"card-title\"><strong>{{ post.title }}</strong></h4>\n                <h5 class=\"card-subtitle mb-4 text-strong\">posted by {{ post.author }}</h5>\n                <p class=\"card-text mb-4\">{{ post.posttext }}</p>\n                <div class=\"card-img\">\n                    <img v-bind:src=\"post.image\" />\n                </div>\n                <p class=\"card-subtitle text-muted\">{{ post.creationdate }}</p>\n            </div>\n        </div>\n    </div>\n    <RouterView />\n</template>\n\n<script>\nimport HeaderLogo from '@/components/HeaderLogo.vue';\n\nexport default {\n    data() {\n        return {\n            posts: []\n        }\n    },\n    created() {\n        this.getPosts()\n    },\n\n    methods: {\n        getPosts() {\n            const userId = JSON.parse(localStorage.getItem(\"user\")).userId\n            const requestOptions = {\n                method: \"GET\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n                },\n            }\n\n            fetch(\"http://localhost:3000/api/posts/\" + userId, requestOptions)\n                .then((res) => {\n                    return res.json()\n                        .then((data) => {\n                            this.posts = data;\n                            console.log(data);\n                        });\n                })\n                .catch((error) => {\n                    console.error(\"There was an error!\", error);\n                });\n        },\n        deleteAccount() {\n            const requestOptions = {\n                method: \"DELETE\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n                },\n            };\n            fetch(\"http://localhost:3000/api/users/\" + JSON.parse(localStorage.getItem(\"user\")).userId, requestOptions)\n                .then((res) => {\n                    return res.json()\n                        .then((data) => {\n                            console.log(data);\n                            if (res.ok) {\n                                this.$router.push(\"/\");\n                                alert(\"Your account has been deleted\");\n                            }\n                        });\n                })\n                .catch((error) => {\n                    console.error(\"There was an error!\", error);\n                });\n        },\n    },\n\n    components: {\n        HeaderLogo,\n\n    }\n}\n\n\n\n</script>\n\n\n<style scoped>\n#home_btn {\n    margin: 2rem 0 4rem 8rem;\n    font-size: 18px;\n}\n\n#delete_account_btn {\n    margin: 2rem 0 4rem 3rem;\n    font-size: 16px;\n}\n\n.card {\n    margin-left: 22rem;\n    margin-bottom: 2rem;\n    width: 50%;\n}\n.card-body {\n    background: linear-gradient(to bottom right, #9ea5f4, #fff);\n    box-shadow: 6px 6px 3px rgba(65, 64, 64, 0.867);\n    padding: 2rem;\n    width: 100%;\n}\n\nimg {\n    height: auto;\n    width: 100%;\n    margin-bottom: 1rem;\n}\n@media screen and (max-width: 768px) {\n    #home_btn {\n        margin: 1rem 0 2rem 3rem;\n        font-size: 18px;\n    }\n\n    #delete_account_btn {\n        margin: 1rem 0 2rem 1rem;\n        font-size: 16px;\n    }\n    .card {\n        display: flex;\n        justify-content: center;\n        margin: .5rem;\n        width: 95%;\n        box-shadow: none;\n    }\n}\n\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}