{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nvar _withScopeId = function _withScopeId(n) {\n  return _pushScopeId(\"data-v-fde769d2\"), n = n(), _popScopeId(), n;\n};\nvar _hoisted_1 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"button\", {\n    \"class\": \"btn btn-primary btn-med\",\n    id: \"home_btn\",\n    role: \"button\"\n  }, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Home\")], -1 /* HOISTED */);\n});\nvar _hoisted_2 = {\n  \"class\": \"col-md-4\"\n};\nvar _hoisted_3 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"h2\", {\n    \"class\": \"addPost_header\"\n  }, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Create a Post\")], -1 /* HOISTED */);\n});\nvar _hoisted_4 = {\n  \"class\": \"addpost_form\"\n};\nvar _hoisted_5 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"firstName-input\",\n    \"class\": \"form-label\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_6 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"title-input\",\n    \"class\": \"form-label\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_7 = /*#__PURE__*/_withScopeId(function () {\n  return /*#__PURE__*/_createElementVNode(\"label\", {\n    \"for\": \"postText-input\",\n    \"class\": \"form-label\"\n  }, null, -1 /* HOISTED */);\n});\nvar _hoisted_8 = {\n  id: \"file\"\n};\nvar _hoisted_9 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_header_logo = _resolveComponent(\"header-logo\");\n  var _component_RouterLink = _resolveComponent(\"RouterLink\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_header_logo), _createVNode(_component_RouterLink, {\n    to: \"/home\"\n  }, {\n    \"default\": _withCtx(function () {\n      return [_hoisted_1];\n    }),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"form\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"class\": \"form-control\",\n    id: \"author\",\n    placeholder: \"Name\",\n    maxlength: \"15\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n      return $data.author = $event;\n    }),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.author]]), _hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"class\": \"form-control\",\n    id: \"title\",\n    placeholder: \"Title\",\n    minlength: \"3\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = function ($event) {\n      return $data.title = $event;\n    }),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.title]]), _hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"class\": \"form-control\",\n    id: \"postText\",\n    placeholder: \"Write post\",\n    minlength: \"25\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = function ($event) {\n      return $data.postText = $event;\n    }),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.postText]]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    ref: \"file\",\n    onChange: _cache[3] || (_cache[3] = function () {\n      return $options.getImage && $options.getImage.apply($options, arguments);\n    })\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */)]), $data.file ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    \"class\": \"image\",\n    src: $data.fileSource\n  }, null, 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    type: \"submit\",\n    id: \"create_post_btn\",\n    onClick: _cache[4] || (_cache[4] = _withModifiers(function ($event) {\n      return $options.createPost();\n    }, [\"prevent\"]))\n  }, \"Create Post\")])])]);\n}","map":{"version":3,"mappings":";;;;;sBAIYA,oBAAkG;IAA1F,SAAM,yBAAyB;IAACC,EAAE,EAAC,UAAU;IAACC,IAAI,EAAC;mBAASF,oBAAqB,gBAAb,MAAI;;;EAE/E,SAAM;AAAU;;sBACjBA,oBAA8D;IAA1D,SAAM;EAAgB,iBAACA,oBAA8B,gBAAtB,eAAa;;;EAC1C,SAAM;AAAc;;sBACtBA,oBAAwD;IAAjD,OAAI,iBAAiB;IAAC,SAAM;;;;sBAEnCA,oBAAoD;IAA7C,OAAI,aAAa;IAAC,SAAM;;;;sBAE/BA,oBAAuD;IAAhD,OAAI,gBAAgB;IAAC,SAAM;;;;EAE7BC,EAAE,EAAC;AAAM;;;;;uBAd1BE,oBAqBM,cApBFC,aAAeC,yBACfD,aAEaE;IAFDC,EAAE,EAAC;EAAO;wBAClB;MAAA,OAAkG,CAAlGC,UAAkG;;;MAEtGR,oBAeM,OAfNS,UAeM,GAdFC,UAA8D,EAC9DV,oBAYO,QAZPW,UAYO,GAXHC,UAAwD,kBACtDZ,oBAAkH;IAA3Ga,IAAI,EAAC,MAAM;IAAC,SAAM,cAAc;IAACZ,EAAE,EAAC,QAAQ;IAACa,WAAW,EAAC,MAAM;IAACC,SAAS,EAAC,IAAI;;aAAUC,YAAM;IAAA;IAAEC,QAAQ,EAAR;iDAARD,YAAM,KACvGE,UAAoD,kBAClDlB,oBAAgH;IAAzGa,IAAI,EAAC,MAAM;IAAC,SAAM,cAAc;IAACZ,EAAE,EAAC,OAAO;IAACa,WAAW,EAAC,OAAO;IAACK,SAAS,EAAC,GAAG;;aAAUH,WAAK;IAAA;IAAEC,QAAQ,EAAR;iDAAPD,WAAK,KACrGI,UAAuD,kBACrDpB,oBAA4H;IAArHa,IAAI,EAAC,MAAM;IAAC,SAAM,cAAc;IAACZ,EAAE,EAAC,UAAU;IAACa,WAAW,EAAC,YAAY;IAACK,SAAS,EAAC,IAAI;;aAAUH,cAAQ;IAAA;IAAEC,QAAQ,EAAR;iDAAVD,cAAQ,KACjHhB,oBAEM,OAFNqB,UAEM,GADFrB,oBAAoE;IAA7Da,IAAI,EAAC,MAAM;IAACS,MAAM,EAAC,SAAS;IAACC,GAAG,EAAC,MAAM;IAAEC,QAAM;MAAA,OAAEC,iEAAQ;IAAA;oDAEzDT,UAAI,kBAAfb,oBAAmD;;IAAlC,SAAM,OAAO;IAAEuB,GAAG,EAAEV;4EACrChB,oBAAiG;IAAzFa,IAAI,EAAC,QAAQ;IAACZ,EAAE,EAAC,iBAAiB;IAAM0B,OAAK;MAAA,OAAUF,mBAAU;IAAA;KAAI,aAAW","names":["_createElementVNode","id","role","_createElementBlock","_createVNode","_component_header_logo","_component_RouterLink","to","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","type","placeholder","maxlength","$data","required","_hoisted_6","minlength","_hoisted_7","_hoisted_8","accept","ref","onChange","$options","src","onClick"],"sourceRoot":"","sources":["/Users/stevengalarza/Webcodes/Project-7/frontend/src/views/AddPost.vue"],"sourcesContent":["<template>\n    <div>\n        <header-logo />\n        <RouterLink to=\"/home\">\n            <button class=\"btn btn-primary btn-med\" id=\"home_btn\" role=\"button\"><strong>Home</strong></button>\n        </RouterLink>\n        <div class=\"col-md-4\">\n            <h2 class=\"addPost_header\"><strong>Create a Post</strong></h2>\n            <form class=\"addpost_form\">\n                <label for=\"firstName-input\" class=\"form-label\"></label>\n                  <input type=\"text\" class=\"form-control\" id=\"author\" placeholder=\"Name\" maxlength=\"15\" v-model=\"author\" required />\n                <label for=\"title-input\" class=\"form-label\"></label>\n                  <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Title\" minlength=\"3\" v-model=\"title\" required />\n                <label for=\"postText-input\" class=\"form-label\"></label>\n                  <input type=\"text\" class=\"form-control\" id=\"postText\" placeholder=\"Write post\" minlength=\"25\" v-model=\"postText\" required />\n                <div id=\"file\">\n                    <input type=\"file\" accept=\"image/*\" ref=\"file\" @change=\"getImage\" />\n                </div>\n                <img v-if=\"file\" class=\"image\" :src=\"fileSource\" />\n                <button type=\"submit\" id=\"create_post_btn\" v-on:click.prevent=\"createPost()\">Create Post</button>\n            </form>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport HeaderLogo from '../components/HeaderLogo.vue';\n\nexport default {\n    data() {\n        return {\n            title: \"\",\n            author: \"\",\n            postText: \"\",\n            image: \"\",\n            file: \"\",\n            fileSource: \"\",\n        };\n    },\n    created() {\n        this.createPost()\n    },\n    methods: {\n        getImage() {\n            this.file = this.$refs.file.files[0];\n            this.fileSource = URL.createObjectURL(this.$refs.file.files[0]);\n        },\n\n        createPost() {\n            let formData = [];\n            let requestOptions = {};\n            let post = {};\n\n            if (this.file != null) {\n                post = JSON.stringify({\n                    title: this.title,\n                    author: this.author,\n                    postText: this.postText,\n                });\n\n                formData = new FormData();\n                formData.set('file', this.file);\n                formData.set('post', post);\n                console.log(formData.post);\n\n                requestOptions = {\n                    method: \"POST\",\n                    headers: {\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n                    },\n                    body: formData,\n                }\n            } else {\n                formData = {\n                    title: this.title,\n                    author: this.author,\n                    postText: this.postText\n                };\n\n                requestOptions = {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n                    },\n                    body: JSON.stringify(formData),\n                };\n            }\n            if (this.title && this.author && this.postText != null) {\n                fetch(\"http://localhost:3000/api/posts/\", requestOptions)\n                .then((res) => {\n                    return res.json()\n                    .then((data) => {\n                        if (res.ok) {\n                            this.$router.push(\"/home\");\n                            alert('post created successfully')\n                        }\n                    });\n                })\n                .catch((error) => {\n                    console.error('There was an error!', error);\n                });\n            }\n        }\n\n    },\n    components: {\n        HeaderLogo\n    }\n};\n</script>\n\n<style scoped>\n* {\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n}\n\nlabel, input {\n    padding: .5rem;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}