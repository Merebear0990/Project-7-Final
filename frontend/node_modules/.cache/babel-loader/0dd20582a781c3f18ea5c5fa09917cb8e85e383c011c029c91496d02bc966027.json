{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-fde769d2\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-primary btn-med\",\n  id: \"home_btn\",\n  role: \"button\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Home\")], -1 /* HOISTED */));\nconst _hoisted_2 = {\n  class: \"col-md-4\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"addPost_header\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Create a Post\")], -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"addpost_form\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"firstName-input\",\n  class: \"form-label\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"title-input\",\n  class: \"form-label\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"postText-input\",\n  class: \"form-label\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_8 = {\n  id: \"file\"\n};\nconst _hoisted_9 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_header_logo = _resolveComponent(\"header-logo\");\n  const _component_RouterLink = _resolveComponent(\"RouterLink\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_header_logo), _createVNode(_component_RouterLink, {\n    to: \"/home\"\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"form\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"author\",\n    placeholder: \"Name\",\n    maxlength: \"15\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.author = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.author]]), _hoisted_6, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"title\",\n    placeholder: \"Title\",\n    minlength: \"3\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.title = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.title]]), _hoisted_7, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"postText\",\n    placeholder: \"Write post\",\n    minlength: \"25\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.postText = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.postText]]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"input\", {\n    type: \"file\",\n    accept: \"image/*\",\n    ref: \"file\",\n    onChange: _cache[3] || (_cache[3] = (...args) => $options.getImage && $options.getImage(...args))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */)]), $data.file ? (_openBlock(), _createElementBlock(\"img\", {\n    key: 0,\n    class: \"image\",\n    src: $data.fileSource\n  }, null, 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", {\n    type: \"submit\",\n    id: \"create_post_btn\",\n    onClick: _cache[4] || (_cache[4] = _withModifiers($event => $options.createPost(), [\"prevent\"]))\n  }, \"Create Post\")])])]);\n}","map":{"version":3,"mappings":";;gEAIYA,oBAAkG;EAA1FC,KAAK,EAAC,yBAAyB;EAACC,EAAE,EAAC,UAAU;EAACC,IAAI,EAAC;iBAASH,oBAAqB,gBAAb,MAAI;;EAE/EC,KAAK,EAAC;AAAU;gEACjBD,oBAA8D;EAA1DC,KAAK,EAAC;AAAgB,iBAACD,oBAA8B,gBAAtB,eAAa;;EAC1CC,KAAK,EAAC;AAAc;gEACtBD,oBAAwD;EAAjDI,GAAG,EAAC,iBAAiB;EAACH,KAAK,EAAC;;gEAEnCD,oBAAoD;EAA7CI,GAAG,EAAC,aAAa;EAACH,KAAK,EAAC;;gEAE/BD,oBAAuD;EAAhDI,GAAG,EAAC,gBAAgB;EAACH,KAAK,EAAC;;;EAE7BC,EAAE,EAAC;AAAM;;;;;uBAd1BG,oBAqBM,cApBFC,aAAeC,yBACfD,aAEaE;IAFDC,EAAE,EAAC;EAAO;sBAClB,MAAkG,CAAlGC,UAAkG;;MAEtGV,oBAeM,OAfNW,UAeM,GAdFC,UAA8D,EAC9DZ,oBAYO,QAZPa,UAYO,GAXHC,UAAwD,kBACtDd,oBAAkH;IAA3Ge,IAAI,EAAC,MAAM;IAACd,KAAK,EAAC,cAAc;IAACC,EAAE,EAAC,QAAQ;IAACc,WAAW,EAAC,MAAM;IAACC,SAAS,EAAC,IAAI;+DAAUC,YAAM;IAAEC,QAAQ,EAAR;iDAARD,YAAM,KACvGE,UAAoD,kBAClDpB,oBAAgH;IAAzGe,IAAI,EAAC,MAAM;IAACd,KAAK,EAAC,cAAc;IAACC,EAAE,EAAC,OAAO;IAACc,WAAW,EAAC,OAAO;IAACK,SAAS,EAAC,GAAG;+DAAUH,WAAK;IAAEC,QAAQ,EAAR;iDAAPD,WAAK,KACrGI,UAAuD,kBACrDtB,oBAA4H;IAArHe,IAAI,EAAC,MAAM;IAACd,KAAK,EAAC,cAAc;IAACC,EAAE,EAAC,UAAU;IAACc,WAAW,EAAC,YAAY;IAACK,SAAS,EAAC,IAAI;+DAAUH,cAAQ;IAAEC,QAAQ,EAAR;iDAAVD,cAAQ,KACjHlB,oBAEM,OAFNuB,UAEM,GADFvB,oBAAoE;IAA7De,IAAI,EAAC,MAAM;IAACS,MAAM,EAAC,SAAS;IAACC,GAAG,EAAC,MAAM;IAAEC,QAAM,yCAAEC,+CAAQ;oDAEzDT,UAAI,kBAAfb,oBAAmD;;IAAlCJ,KAAK,EAAC,OAAO;IAAE2B,GAAG,EAAEV;4EACrClB,oBAAiG;IAAzFe,IAAI,EAAC,QAAQ;IAACb,EAAE,EAAC,iBAAiB;IAAM2B,OAAK,qDAAUF,mBAAU;KAAI,aAAW","names":["_createElementVNode","class","id","role","for","_createElementBlock","_createVNode","_component_header_logo","_component_RouterLink","to","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","type","placeholder","maxlength","$data","required","_hoisted_6","minlength","_hoisted_7","_hoisted_8","accept","ref","onChange","$options","src","onClick"],"sourceRoot":"","sources":["/Users/stevengalarza/Webcodes/Project-7/frontend/src/views/AddPost.vue"],"sourcesContent":["<template>\n    <div>\n        <header-logo />\n        <RouterLink to=\"/home\">\n            <button class=\"btn btn-primary btn-med\" id=\"home_btn\" role=\"button\"><strong>Home</strong></button>\n        </RouterLink>\n        <div class=\"col-md-4\">\n            <h2 class=\"addPost_header\"><strong>Create a Post</strong></h2>\n            <form class=\"addpost_form\">\n                <label for=\"firstName-input\" class=\"form-label\"></label>\n                  <input type=\"text\" class=\"form-control\" id=\"author\" placeholder=\"Name\" maxlength=\"15\" v-model=\"author\" required />\n                <label for=\"title-input\" class=\"form-label\"></label>\n                  <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Title\" minlength=\"3\" v-model=\"title\" required />\n                <label for=\"postText-input\" class=\"form-label\"></label>\n                  <input type=\"text\" class=\"form-control\" id=\"postText\" placeholder=\"Write post\" minlength=\"25\" v-model=\"postText\" required />\n                <div id=\"file\">\n                    <input type=\"file\" accept=\"image/*\" ref=\"file\" @change=\"getImage\" />\n                </div>\n                <img v-if=\"file\" class=\"image\" :src=\"fileSource\" />\n                <button type=\"submit\" id=\"create_post_btn\" v-on:click.prevent=\"createPost()\">Create Post</button>\n            </form>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport HeaderLogo from '../components/HeaderLogo.vue';\n\nexport default {\n    data() {\n        return {\n            title: \"\",\n            author: \"\",\n            postText: \"\",\n            image: \"\",\n            file: \"\",\n            fileSource: \"\",\n        };\n    },\n    created() {\n        this.createPost()\n    },\n    methods: {\n        getImage() {\n            this.file = this.$refs.file.files[0];\n            this.fileSource = URL.createObjectURL(this.$refs.file.files[0]);\n        },\n\n        createPost() {\n            let formData = [];\n            let requestOptions = {};\n            let post = {};\n\n            if (this.file != null) {\n                post = JSON.stringify({\n                    title: this.title,\n                    author: this.author,\n                    postText: this.postText,\n                });\n\n                formData = new FormData();\n                formData.set('file', this.file);\n                formData.set('post', post);\n                console.log(formData.post);\n\n                requestOptions = {\n                    method: \"POST\",\n                    headers: {\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n                    },\n                    body: formData,\n                }\n            } else {\n                formData = {\n                    title: this.title,\n                    author: this.author,\n                    postText: this.postText\n                };\n\n                requestOptions = {\n                    method: \"POST\",\n                    headers: {\n                        \"Content-Type\": \"application/json\",\n                        Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n                    },\n                    body: JSON.stringify(formData),\n                };\n            }\n            if (this.title && this.author && this.postText != null) {\n                fetch(\"http://localhost:3000/api/posts/\", requestOptions)\n                .then((res) => {\n                    return res.json()\n                    .then((data) => {\n                        if (res.ok) {\n                            this.$router.push(\"/home\");\n                            alert('post created successfully')\n                        }\n                    });\n                })\n                .catch((error) => {\n                    console.error('There was an error!', error);\n                });\n            }\n        }\n\n    },\n    components: {\n        HeaderLogo\n    }\n};\n</script>\n\n<style scoped>\n* {\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n}\n\nlabel, input {\n    padding: .5rem;\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}