{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      post: {}\n    };\n  },\n  created() {\n    this.getPost();\n  },\n  mounted() {\n    this.readCheck();\n  },\n  methods: {\n    readCheck() {\n      if (this.post.readby != null) {\n        const check = this.post.readby.includes(JSON.parse(localStorage.getItem(\"user\")).userId);\n        console.log(check);\n        return !check;\n      }\n    },\n    getImage() {\n      return `/backend/images/${post.image}`;\n    },\n    getPost() {\n      let id = window.location.href.split('/').pop();\n      const requestOptions = {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token\n        }\n      };\n      fetch(\"http://localhost:3000/api/posts/one/\" + id, requestOptions).then(res => {\n        return res.json().then(data => {\n          this.post = data[0];\n          console.log(data);\n        });\n      }).catch(error => {\n        console.error(\"There was an error!\", error);\n      });\n    },\n    addReadby() {\n      let setReadby = [];\n      let userId = JSON.parse(localStorage.getItem(\"user\")).userid;\n      let id = window.location.href.split('/').pop();\n      console.log(id);\n      if (JSON.parse(localStorage.getItem(\"user\")).userid === this.userid) {\n        setReadby = {\n          readby: userId,\n          postId: id\n        };\n        const requestOptions = {\n          method: \"PUT\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token\n          },\n          body: JSON.stringify(setReadby)\n        };\n        fetch(\"http://localhost:3000/api/posts/\" + id, requestOptions).then(res => {\n          return res.json().then(data => {\n            console.log(data);\n            if (res.ok) {\n              this.$router.push(\"/home\");\n            }\n          });\n        }).catch(error => {\n          console.error(\"There was an error!\", error);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["data","post","created","getPost","mounted","readCheck","methods","readby","check","includes","JSON","parse","localStorage","getItem","userId","console","log","getImage","image","id","window","location","href","split","pop","requestOptions","method","headers","Authorization","token","fetch","then","res","json","catch","error","addReadby","setReadby","userid","postId","body","stringify","ok","$router","push"],"sourceRoot":"","sources":["/Users/stevengalarza/Webcodes/Project-7/frontend/src/components/OnePost.vue"],"sourcesContent":["<template>\n    <div class = \"posts\">\n      <div :key=\"post.postid\" class=\"card\" >\n        <div class=\"card-body\">\n            <i v-if=\"readCheck()\" class=\"fas fa-envelope\" type = \"submit\" id=\"unread\" v-on:click =\"addReadby()\"></i>\n            <h4 class=\"card-title\"><strong>{{ post.title }}</strong></h4>\n            <h5 class=\"card-subtitle mb-4 text-strong\">posted by {{ post.author }}</h5>\n            <p class=\"card-text mb-4\">{{ post.posttext }}</p>\n                <div class=\"card-img\">\n                  <img v-bind:src=\"post.image\"/>\n                </div>\n            <p class=\"card-subtitle text-muted\">{{ post.creationdate }}</p>\n        </div>\n      </div>  \n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n      return {\n        post: {}\n      }\n    },\n    created() {\n      this.getPost()\n    },\n    mounted() {\n        this.readCheck()\n    },\n    methods: {   \n        readCheck() {\n            if (this.post.readby != null) {\n                const check = this.post.readby.includes(JSON.parse(localStorage.getItem(\"user\")).userId);\n                console.log(check)\n                return !check\n            }\n        },\n        getImage() {\n            return `/backend/images/${post.image}`\n        },\n        getPost() {\n            let id = window.location.href.split('/').pop()\n            const requestOptions = {\n              method: \"GET\",\n              headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,\n              }, \n          }\n          fetch(\"http://localhost:3000/api/posts/one/\" + id, requestOptions)\n            .then((res) => {\n                return res.json()\n            .then((data) => {\n                this.post = data[0];\n                console.log(data);\n                });\n            })\n            .catch((error) => {\n                console.error(\"There was an error!\", error);\n            });\n        },\n        addReadby() {\n            let setReadby = []\n            let userId = JSON.parse(localStorage.getItem(\"user\")).userid\n            let id = window.location.href.split('/').pop()\n            console.log(id)\n            if (JSON.parse(localStorage.getItem(\"user\")).userid === this.userid) {\n                setReadby = {\n                    readby: userId,\n                    postId: id\n                }\n            \n            const requestOptions = {\n                method: \"PUT\",\n                headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \" + JSON.parse(localStorage.getItem(\"user\")).token,   \n                }, \n                body: JSON.stringify(setReadby),\n            };\n            fetch(\"http://localhost:3000/api/posts/\" + id,  requestOptions)\n                .then((res) => {\n                    return res.json()\n                .then((data) => {\n                    console.log(data);\n                        if (res.ok) {\n                            this.$router.push(\"/home\");\n                        }\n                    });\n                })\n                .catch((error) => {\n                    console.error(\"There was an error!\", error);\n                });\n            }\n        \n        }\n    }\n}\n</script>\n\n\n\n<style scoped>\n* {\n    box-sizing: border-box;\n    padding: 0;\n    margin: 0;\n}\n.card {\n    display: flex;\n    flex-wrap: wrap;\n    margin: 5rem 5rem 0 23rem;\n    width: 45%;\n    background: linear-gradient(to bottom right, #9ea5f4, #ffffff);\n    box-shadow: 6px 6px 3px rgba(65, 64, 64, 0.867);\n}\ni {\n    display: inline-block;\n    position: absolute;\n    margin-left: 85%;\n    padding: .5rem;\n}\n.card-body {\n    padding: 2rem;\n}\nimg {\n    height: auto;\n    width: 100%;\n    margin: .5rem;\n    object-fit: cover;\n}\n@media screen and (max-width: 768px) {\n    .card {\n        display: flex;\n        justify-content: center;\n        margin: .5rem;\n        width: 95%;\n        box-shadow: none;\n    }\n    i {\n        margin-left: 75%;\n        padding: 0;\n    }\n}\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}